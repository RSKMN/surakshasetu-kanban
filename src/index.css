/* ============ Theme ============ */
:root{
--bg:#0a0f1f; --panel:#0b132b; --card:#1c2541; --text:#e6eefc; --muted:#9fb0c6;
--brand-1:#00d4ff; --brand-2:#7c4dff; --danger:#ef476f; --tape:#f7f1d1;
--note-shadow:rgba(0,0,0,.28);
}
[data-theme="light"]{
--bg:#f5f7fb; --panel:#ffffff; --card:#fffbe6; --text:#0b132b; --muted:#4a5a75;
--brand-1:#5b8cff; --brand-2:#7c4dff; --danger:#d7263d; --note-shadow:rgba(0,0,0,.12);
}

/* ============ Base ============ */
*{ box-sizing:border-box }
html,body,#root{ height:100% }
body{ margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text) }
.page-pad{ padding:16px }

/* Buttons, chips, toolbar */
.btn{ background:#243b55; color:#fff; border:0; border-radius:10px; padding:8px 14px; cursor:pointer }
.btn:hover{ filter:brightness(1.07) }
.btn-primary{ background:linear-gradient(135deg,var(--brand-1),var(--brand-2)) }
.btn-danger{ background:var(--danger) }
.muted{ color:var(--muted) }
.chip{ background:#1d2746; color:#d9e6ff; border-radius:8px; padding:4px 8px; font-size:12px }
.brand{ font-weight:800 }
.topbar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; border-bottom:1px solid #1d2746; padding-bottom:8px }
.topbar .left{ display:flex; align-items:center; gap:10px }
.toolbar{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }

/* Theme switch */
.switch{ position:relative; width:56px; height:28px; display:inline-grid; place-items:center }
.switch input{ appearance:none; width:100%; height:100%; margin:0; position:absolute; inset:0; cursor:pointer; opacity:0 }
.switch .slider{ position:absolute; inset:0; background:#243b55; border-radius:999px; transition:.2s ease }
.switch .slider::after{ content:""; position:absolute; top:3px; left:3px; width:22px; height:22px; background:#fff; border-radius:50%; transition:.2s ease }
.switch input:checked + .slider{ background:#ffd166 }
.switch input:checked + .slider::after{ transform:translateX(28px) }
.switch .icon{ position:absolute; font-size:14px; pointer-events:none }
.switch .sun{ left:8px } .switch .moon{ right:8px }

/* Palette */
.palette{ display:flex; gap:8px; align-items:center }
.swatch{ width:26px; height:26px; border-radius:6px; border:2px solid rgba(255,255,255,.35); cursor:pointer; box-shadow:0 2px 6px var(--note-shadow) }
.swatch.selected{ outline:2px solid #fff; outline-offset:2px }

/* ============ Board ============ */
.kanban{ max-width:1560px; margin:0 auto; padding-inline:12px; display:grid; gap:12px }
.kanban-header{ display:flex; justify-content:space-between; align-items:center }
.columns{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:20px }
.column{ background:var(--panel); border-radius:14px; padding:12px; min-height:60vh; border:1px solid #19254a }
.col-title{ margin:2px 0 10px 2px; font-size:16px; letter-spacing:.2px }

/* Grid of notes within a column */
.items{ display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:12px }
@media (min-width:1400px){ .items{ grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); gap:14px } }
@media (max-width:700px){ .columns{ grid-template-columns:1fr } }

/* ============ Sticky Notes ============ */
.card{ position:relative; border-radius:12px; padding:0; margin:0; box-shadow:0 12px 22px var(--note-shadow); transition:transform .12s ease, box-shadow .12s ease }
.card:hover{ transform:translateY(-2px); box-shadow:0 16px 28px var(--note-shadow) }
.card.square{ aspect-ratio:1/1; padding:16px 10px 8px 10px; display:grid; grid-template-rows:auto 1fr auto; overflow-wrap:anywhere }

/* Tape + accent strip */
.note .note-tape{ content:""; position:absolute; top:-6px; left:50%; transform:translateX(-50%) rotate(-2deg); width:46px; height:12px; background:var(--tape); opacity:.85; box-shadow:0 2px 4px rgba(0,0,0,.15) }
.note-header{ position:absolute; top:6px; left:8px; right:8px; height:6px; background:rgba(255,255,255,.25); border-radius:4px }

/* Overlay to help text legibility on bright colors */
.card.note::before{
content:""; position:absolute; left:0; right:0; top:26px; height:32px;
background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,0));
pointer-events:none; border-top-left-radius:12px; border-top-right-radius:12px; z-index:1;
}
.prio,.ribbon,.note-tape{ position:absolute; z-index:2 }

/* Title & description (always readable) */
.card-title,.card-desc{ color:#0b132b; text-shadow:0 1px 0 rgba(255,255,255,.35); position:relative; z-index:3 }
.card-title{
font-weight:900; font-size:14px; line-height:1.2; margin-bottom:6px;
display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.card-desc{
color:#22364d; font-weight:600; opacity:.95; font-size:12px; line-height:1.3; margin-bottom:8px;
display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;
}

/* Priority & status */
.prio{ top:6px; left:8px; padding:2px 6px; border-radius:8px; font-weight:800; font-size:10px; box-shadow:0 2px 4px var(--note-shadow) }
.prio-low{ background:#8bd3dd; color:#0b132b } .prio-medium{ background:#ffd166; color:#0b132b } .prio-high{ background:#ef476f; color:#fff }
.ribbon{ top:6px; right:6px; font-size:10px; font-weight:800; padding:2px 7px; border-radius:8px; box-shadow:0 2px 4px var(--note-shadow); opacity:.95; background:#ffe; color:#0b132b }
.ribbon.ribbon-in_progress{ background:#ffe7b8 } .ribbon.ribbon-done{ background:#c5ffd9 }

/* Meta row: assignee + action */
.card-meta{ display:flex; justify-content:space-between; align-items:center; margin-top:auto; font-size:11px }
.assignee{
background:rgba(0,0,0,.08); padding:3px 8px; border-radius:999px; min-width:96px; max-width:55%;
text-align:center; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.actions-mini{ display:flex; gap:6px; align-items:center; margin-left:auto }
.mini{
font-size:11px; font-weight:800; border:0; cursor:pointer; padding:5px 8px; border-radius:10px;
color:#0b132b; background:#ffe; box-shadow:0 2px 4px var(--note-shadow); white-space:nowrap;
}
.mini:hover{ filter:brightness(1.06) }
.mini[disabled]{ background:#c5ffd9; color:#0b132b; opacity:1; cursor:default }

/* ============ Modal & Forms ============ */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:grid; place-items:center; z-index:1000 }
.modal-card{ width:460px; max-width:calc(100% - 24px); background:var(--panel); border:1px solid #1d2746; color:var(--text); border-radius:12px; padding:16px }
.modal-title{ margin:0 0 10px 0 }
.label{ display:block; margin:10px 0 6px 0; color:var(--muted) }
.input,.textarea,.select{ width:100%; border:1px solid #1d2746; background:#0f1630; color:var(--text); border-radius:8px; padding:8px 10px }
[data-theme="light"] .input,[data-theme="light"] .textarea,[data-theme="light"] .select{ background:#fff }
.textarea{ resize:vertical }
.actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px }

/* ============ Intro ============ */
.intro-hero{ min-height:100vh; display:grid; place-items:center; padding:24px }
.intro-card{ max-width:720px; width:100%; background:var(--panel); border:1px solid #1d2746; border-radius:16px; padding:28px; text-align:center; box-shadow:0 12px 40px var(--note-shadow) }
.intro-title{ margin:0 0 8px 0; font-size:40px }
.intro-sub{ margin:0; font-size:18px; color:var(--muted) }
.intro-desc{ margin:14px 0 22px 0 }
.intro-actions{ display:flex; justify-content:center }